/*! ap-drilldown-menu v0.1.1 | (c) 2013, 2015 Aptuitiv, Inc. */
!function(a,b,c){b.Modernizr=function(a,b,c){function d(a){n.cssText=a}function e(a,b){return typeof a===b}var f,g,h,i="2.6.2",j={},k=b.documentElement,l="modernizr",m=b.createElement(l),n=m.style,o=({}.toString,{}),p=[],q=p.slice,r=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:l+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',l,'">',a,"</style>"].join(""),j.id=l,(m?j:n).innerHTML+=f,n.appendChild(j),m||(n.style.background="",n.style.overflow="hidden",i=k.style.overflow,k.style.overflow="hidden",k.appendChild(n)),g=c(j,a),m?j.parentNode.removeChild(j):(n.parentNode.removeChild(n),k.style.overflow=i),!!g},s=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return r("@media "+b+" { #"+l+" { position: absolute; } }",function(b){d="absolute"==(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).position}),d},t={}.hasOwnProperty;h=e(t,"undefined")||e(t.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return t.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=q.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(q.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(q.call(arguments)))};return d});for(var u in o)h(o,u)&&(g=u.toLowerCase(),j[g]=o[u](),p.push((j[g]?"":"no-")+g));return j.addTest=function(a,b){if("object"==typeof a)for(var d in a)h(a,d)&&j.addTest(d,a[d]);else{if(a=a.toLowerCase(),j[a]!==c)return j;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(k.className+=" "+(b?"":"no-")+a),j[a]=b}return j},d(""),m=f=null,j._version=i,j.mq=s,j.testStyles=r,j}(this,this.document);var d=Modernizr.mq("only all");a.fn.apDrillDownMenu=function(e){var f=a.extend({},a.fn.apDrillDownMenu.defaults,e);f.showSpeed=parseInt(f.showSpeed);var g=parseInt(f.height),h={current:"ap-ddmenu-current",icon:"ap-ddmenu-link-icon",menuTop:"ap-ddmenu-top",menuWrapper:"ap-ddmenu",scroll:"ap-ddmenu-scroll"};if(!d){{a(this).parents().eq(0)}a(b).on("load resize",function(){a(b).width()>f.maxWindowWidth?(a("html").removeClass(f.ieMobileClass),a(f.toggleSwitch).hide()):(a("html").addClass(f.ieMobileClass),a(f.toggleSwitch).show())})}return h.menuTopTest="."+h.menuTop,this.each(function(){if("ul"==this.tagName.toLowerCase()){var e,i=a(this),j=i.parent(),k=i.parent();a(f.toggleSwitch).on("click touchstart",function(b){b.preventDefault(),s(),d?j.stop().slideToggle({duration:f.toggleSpeed}):j.toggle(),l(a("."+h.current))});var l=function(c){a(b).width()<f.maxWindowWidth&&(g>0?parseInt(c.css("height"))>g&&c.addClass(h.scroll).css("height",g):k.css("height",c.outerHeight()+a(f.headerSelector).outerHeight()))},m=i.data("apDrillDownMenuSetup");if("yes"!=m){i.data("apDrillDownMenuSetup","yes"),i.addClass(h.menuTop).addClass(h.current),i.wrap('<div class="'+h.menuWrapper+'"></div>'),k=i.parent(),k.css({width:f.width,height:f.height}),e=k.parent(),a(f.headerSelector).length||k.prepend('<div class="'+f.headerSelector.split(".")[1]+'"></div>');var n=a(f.headerSelector),o=!1;f.currentText&&(a(f.currentTextSelector).length||n.prepend('<div class="'+f.currentTextSelector.split(".")[1]+'"></div>'),o=a(f.currentTextSelector)),f.backLink===!0&&f.backLinkSelector!==c&&a(f.backLinkSelector).length>0||n.prepend('<a href="#" class="'+f.backLinkSelector.split(".")[1]+'">'+f.backLinkText+"</a>");var p=a(f.backLinkSelector);p.hide(),p.click(function(b){if(b.preventDefault(),!i.is(":animated")){var c=(a(this),parseFloat(i.css("left"))+k.width());i.animate({left:c},f.showSpeed,function(){var b=a("ul."+h.current,i);b.hide();var c=b.parents("ul:first");q(b),r(c),o!==!1&&c.is(h.menuTopTest)===!1&&o.text(t(c.prev())),l(a("."+h.current))})}});var q=function(a){a.removeClass(h.scroll).removeClass(h.current)},r=function(a){var b=a.is(h.menuTopTest);b||a.css("left",k.width()),a.show().addClass(h.current),l(a),p!==!1&&(b?p.hide():p.show()),o!==!1&&(b?o.hide():o.show())},s=(function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}(),function(){var c=a("."+h.current,i),d=c.parentsUntil("."+h.menuWrapper,"ul").length,e=a(b).width();d>0&&(i.css("left",d*e*-1),c.parentsUntil("."+h.menuTop,"ul").css("left",e),c.css("left",e))}),t=function(a){return a.clone().children().remove().end().text()};b.addEventListener?(b.addEventListener("resize",s,!1),b.addEventListener("orientationchange",s,!1)):b.attachEvent("onresize",s),l(i),i.find("a").each(function(){var c=a(this);if(c.siblings("ul").length>0){if(f.prependCurrentOnChild){var d=c.clone(!0),e=a('<li class="'+f.cloneClass+'"></li>');e.append(d),c.siblings("ul").prepend(e),"function"==typeof f.prependCurrentOnChildCallback&&f.prependCurrentOnChildCallback.apply(d)}c.append('<span class="'+h.icon+'">'+f.parentIconText+"</span>"),c.click(function(d){if(a(b).width()<=f.maxWindowWidth){d.preventDefault();var e=a(this).siblings("ul"),g=c.parents("ul:first"),j=g.is(h.menuTopTest),l=j?0:parseFloat(i.css("left")),m=parseFloat(k.width()),n=Math.round(l-m);q(g),r(e),i.animate({left:n},f.showSpeed),o!==!1&&o.text(t(c))}})}}),a(b).on("resize",function(){u(),s()})}else l(a("ul."+h.current,k));var u=function(){a(b).width()>f.maxWindowWidth?(k.attr("style",""),a(h.menuTopTest).find("ul").attr("style",""),!a("."+h.current).hasClass(h.menuTop)&&a("."+h.current).parent().hasClass(h.menuWrapper)&&a("."+h.current).hide().parent().closest(".sub-menu").hide(),e.attr("style","")):(k.css("height",a("."+h.current).css("height")),e.hasClass("expanded")&&e.show(),a("."+h.current).show().parent().closest(".sub-menu").show(),l(a("."+h.current,k)))}}})},a.fn.apDrillDownMenu.defaults={maxWindowWidth:875,ieMobileClass:"mobile",width:"100%",height:"auto",showSpeed:200,backLink:!0,backLinkText:"Back",backLinkSelector:".ap-ddmenu-back",headerSelector:".ap-ddmenu-header",currentText:!0,currentTextSelector:".ap-ddmenu-current-text",cloneClass:"clone",prependCurrentOnChild:!0,prependCurrentOnChildCallback:function(){},parentIconText:"",toggleSwitch:".ap-ddmenu-toggle",toggleSpeed:200}}(jQuery,window);