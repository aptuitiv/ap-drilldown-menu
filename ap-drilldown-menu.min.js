(function(e,t,n){t.Modernizr=function(e,t,n){function r(e){p.cssText=e}function i(e,t){return r(prefixes.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}var a="2.6.2",f={},l=t.documentElement,c="modernizr",h=t.createElement(c),p=h.style,d,v={}.toString,m={},g={},y={},b=[],w=b.slice,E,S=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),h=t.body,p=h||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:c+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',c,'">',e,"</style>"].join(""),f.id=c,(h?f:p).innerHTML+=s,p.appendChild(f),h||(p.style.background="",p.style.overflow="hidden",a=l.style.overflow,l.style.overflow="hidden",l.appendChild(p)),o=n(f,e),h?f.parentNode.removeChild(f):(p.parentNode.removeChild(p),l.style.overflow=a),!!o},x=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var r;return S("@media "+t+" { #"+c+" { position: absolute; } }",function(t){r=(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle)["position"]=="absolute"}),r},T={}.hasOwnProperty,N;!s(T,"undefined")&&!s(T.call,"undefined")?N=function(e,t){return T.call(e,t)}:N=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=w.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(w.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(w.call(arguments)))};return r});for(var C in m)N(m,C)&&(E=C.toLowerCase(),f[E]=m[C](),b.push((f[E]?"":"no-")+E));return f.addTest=function(e,t){if(typeof e=="object")for(var r in e)N(e,r)&&f.addTest(r,e[r]);else{e=e.toLowerCase();if(f[e]!==n)return f;t=typeof t=="function"?t():t,typeof enableClasses!="undefined"&&enableClasses&&(l.className+=" "+(t?"":"no-")+e),f[e]=t}return f},r(""),h=d=null,f._version=a,f.mq=x,f.testStyles=S,f}(this,this.document);var r=Modernizr.mq("only all");e.fn.apDrillDownMenu=function(i){var s=e.extend({},e.fn.apDrillDownMenu.defaults,i);s.showSpeed=parseInt(s.showSpeed);var o=parseInt(s.height);var u={current:"ap-ddmenu-current",icon:"ap-ddmenu-link-icon",menuTop:"ap-ddmenu-top",menuWrapper:"ap-ddmenu",scroll:"ap-ddmenu-scroll"};if(!r){var a=e(this).parents().eq(0);e(t).on("load resize",function(){if(e(t).width()>s.maxWindowWidth){e("html").removeClass(s.ieMobileClass);e(s.toggleSwitch).hide()}else{e("html").addClass(s.ieMobileClass);e(s.toggleSwitch).show()}})}u.menuTopTest="."+u.menuTop;return this.each(function(){if(this.tagName.toLowerCase()=="ul"){var i=e(this);var a=i.parent(),f=i.parent();var l;e(s.toggleSwitch).on("click touchstart",function(t){t.preventDefault();b();if(!r){a.toggle()}else{a.stop().slideToggle({duration:s.toggleSpeed})}c(e("."+u.current))});var c=function(t){if(o>0){if(parseInt(t.css("height"))>o)t.addClass(u.scroll).css("height",o)}else{f.css("height",t.outerHeight()+e(s.headerSelector).outerHeight())}};var h=i.data("apDrillDownMenuSetup");if(h!="yes"){i.data("apDrillDownMenuSetup","yes");i.addClass(u.menuTop).addClass(u.current);i.wrap('<div class="'+u.menuWrapper+'"></div>');f=i.parent();f.css({width:s.width,height:s.height});l=f.parent();if(!e(s.headerSelector).length){f.prepend('<div class="'+s.headerSelector.split(".")[1]+'"></div>')}var p=e(s.headerSelector);var d=false;if(s.currentText){if(!e(s.currentTextSelector).length){p.prepend('<div class="'+s.currentTextSelector.split(".")[1]+'"></div>')}d=e(s.currentTextSelector)}if(!(s.backLink===true&&s.backLinkSelector!==n&&e(s.backLinkSelector).length>0)){p.prepend('<a href="#" class="'+s.backLinkSelector.split(".")[1]+'">'+s.backLinkText+"</a>")}var v=e(s.backLinkSelector);v.hide();v.click(function(t){t.preventDefault();if(!i.is(":animated")){var n=e(this);var r=parseFloat(i.css("left"))+f.width();i.animate({left:r},s.showSpeed,function(){var t=e("ul."+u.current,i);t.hide();var n=t.parents("ul:first");m(t);g(n);if(d!==false&&n.is(u.menuTopTest)===false){d.text(w(n.prev()))}c(e("."+u.current))})}});var m=function(e){e.removeClass(u.scroll).removeClass(u.current)};var g=function(e){var t=e.is(u.menuTopTest);if(!t){e.css("left",f.width())}e.show().addClass(u.current);c(e);if(v!==false){!t?v.show():v.hide()}if(d!==false){!t?d.show():d.hide()}};var y=function(){var e=0;return function(t,n){clearTimeout(e);e=setTimeout(t,n)}}();var b=function(){var n=e("."+u.current,i);var r=n.parentsUntil("."+u.menuWrapper,"ul").length;var s=e(t).width();if(r>0){i.css("left",r*s*-1);n.parentsUntil("."+u.menuTop,"ul").css("left",s);n.css("left",s)}};var w=function(e){return e.clone().children().remove().end().text()};if(!t.addEventListener){t.attachEvent("onresize",b)}else{t.addEventListener("resize",b,false);t.addEventListener("orientationchange",b,false)}c(i);i.find("a").each(function(){var n=e(this);if(n.next().is("ul")){if(s.prependCurrentOnChild){var r=n.clone(true);var o=e('<li class="'+s.cloneClass+'"></li>');o.append(r);n.next().prepend(o);if(typeof s.prependCurrentOnChildCallback=="function"){s.prependCurrentOnChildCallback.apply(r)}}n.append('<span class="'+u.icon+'">'+s.parentIconText+"</span>");n.click(function(r){if(e(t).width()<=s.maxWindowWidth){r.preventDefault();var o=e(this).next();var a=n.parents("ul:first");var l=a.is(u.menuTopTest);var c=l?0:parseFloat(i.css("left"));var h=parseFloat(f.width());var p=Math.round(c-h);m(a);g(o);i.animate({left:p},s.showSpeed);if(d!==false){d.text(w(n))}}})}});e(t).on("resize",function(){y(function(){E()},100);b()})}else{c(e("ul."+u.current,f))}var E=function(){if(e(t).width()>s.maxWindowWidth){f.css("height",0);e(u.menuTopTest).find("ul").attr("style","");if(!e("."+u.current).hasClass(u.menuTop)&&e("."+u.current).parent().hasClass(u.menuWrapper)){e("."+u.current).hide().parent().closest(".sub-menu").hide()}l.attr("style","")}else{f.css("height",e("."+u.current).css("height"));if(l.hasClass("expanded"))l.show();e("."+u.current).show().parent().closest(".sub-menu").show()}c(e("."+u.current,f))}}})};e.fn.apDrillDownMenu.defaults={maxWindowWidth:875,ieMobileClass:"mobile",width:"100%",height:"auto",showSpeed:200,backLink:true,backLinkText:"Back",backLinkSelector:".ap-ddmenu-back",headerSelector:".ap-ddmenu-header",currentText:true,currentTextSelector:".ap-ddmenu-current-text",cloneClass:"clone",prependCurrentOnChild:true,prependCurrentOnChildCallback:function(){},parentIconText:"",toggleSwitch:".ap-ddmenu-toggle",toggleSpeed:200}})(jQuery,window)